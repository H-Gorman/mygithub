<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>js图片延迟加载</title>
</head>
<body>
<div style="height:1000px;width:800px;border:1px;background:gray;"></div>
<img class="lazy" src="" alt="../中国电信/img/banner_center_6.jpg"/>
<script type="text/JavaScript">
  var temp = -1;//用来判断是否是向下滚动（向上滚动就不需要判断延迟加载图片了）
  window.onscroll = function() {
    var imgElements = document.getElementsByTagName("img");
    var lazyImgArr = new Array();
    var j = 0;
    for(var i=0; i<imgElements.length; i++) {
      if(imgElements[i].className == "lazy"){
        lazyImgArr[j++] = imgElements[i];
      }
    }
    var scrollHeight = document.body.scrollTop;//滚动的高度
    var bodyHeight = document.body.offsetHeight;//body（页面）可见区域的总高度
    if(temp < scrollHeight) {//为true表示是向下滚动，否则是向上滚动，不需要执行动作。

      for(var k=0; k<lazyImgArr.length; k++) {
        var imgTop = lazyImgArr[k].offsetTop;//1305（图片纵坐标）
        if((imgTop - scrollHeight) <= bodyHeight) {
          lazyImgArr[k].src = lazyImgArr[k].alt;
          lazyImgArr[k].className = "notlazy"
        }
      }
      temp = scrollHeight;
    }
  };
</script>
</body>
</html>
